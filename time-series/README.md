# Tech Challenge - Instruções
O nosso projeto foi desenvolvido pensando em um ambiente local, uma vez que não conseguimos realizar via cloud por questões de acessos à ferramentas específicas. A ideia foi criar um projeto que executasse localmente em uma máquina windows e que atendesse todas as necessidades. Sendo assim, segue passo a passo do que foi criado no projeto:

1. Foi criado na máquina um ambiente virtual utilizando Anaconda, no qual foram instaladas as libs necessárias para execução do projeto. O arquivo `oil_price_conda_env.yaml` contém as configurações que foram utilizadas no ambiente virtual
2. No arquivo `incremental_ipea_data.py` desenvolvemos um script python que coleta via web scraping os dados do IPEA e carrega de forma incremental em um arquivo csv. Esta carga foi automatizada utilizando o task scheduler do windows (detalhes no arquivo `update_oil_price_scheduler.xml`). Os dados foram salvos no arquivo `oil_price_hist.csv`
    1. Sabemos que salvar o arquivo em csv não é o melhor dos mundos, porém dada a facilidade de trabalhar com este tipo de arquivo e o mesmo atender ao projeto proposto decidimos seguir por este caminho. Por exemplo: via pandas conseguimos criar um processo de carga incremental salvando os novos dados no final do arquivo, o que não foi possível quando tentamos via parquet. Aqui existe uma possibilidade de evolução no projeto
    2. O arquivo `utils_functions.py` contém as funções que foram utilizadas para a carga incremental
3. Criamos um dashboard em Power BI (`ipea_oil_price_dashboard.pbix`) para analisar os dados do IPEA e colertar insights
4. Após criação do dash, utilizamos os insights coletados no desenvolvimento do notebook `ipea_model_training.ipynb`, que tinha como objetivo criar um modelo para previsão dos dados. Testamos alguns tipos de modelos e decidimos através do MAPE a melhor opção para salvar o modelo via `joblib`. O arquivo no qual o modelo foi salvo é o `prophet_time_series.joblib`
5. Criamos o script `ipea_oil_price_predict.py` que tem como objetivo carregar os dados de produção e com base na última data disponível realizar a previsão para os próximos 10 dias úteis. O resultado desta predição foi extraído para o arquivo `oil_price_forecast_10d.csv`, que foi utilizado para alimentar o dashboard mencionado anteriormente, criando uma visão com a previsão para os próximos dias em uma das abas. Este script também foi automatizado via task scheduler (`oil_price_predict_scheduler.xml`)
6. Criação do MVP no streamlit. Criampos a aplicação que roda sob o script `app.py`. No arquivo `requirements.txt` estão as libs necessárias para rodar a aplicação. O MVP consistem em uma página onde a pessoa consegue ver a variação histórica do preço do petróle e posteriormente prever os próximos dias. O modelo utilizado foi o mesmo treinado e que se encontra no arquivo `prophet_time_series.joblib`